{% extends 'base.html' %}
{% block content %}

<section class="bg-gray-100 py-12 px-6">
    <div class="container mx-auto text-center" data-aos="fade-down">
        <h1 class="text-4xl font-bold">Configure Your Order</h1>
        <p class="text-gray-500 mt-2">Tailor your service exactly how you need it.</p>
    </div>
</section>

<div class="container mx-auto px-6 py-12">
    <div class="flex overflow-x-auto gap-4 mb-10 pb-4 no-scrollbar">
        {% for s in services %}
        <button onclick="selectService('{{ s.name }}', '{{ forloop.counter }}')" 
                id="btn-{{ forloop.counter }}"
                class="service-tab whitespace-nowrap px-8 py-4 rounded-xl bg-white border font-bold hover:shadow-md transition-all">
            <i class="fas {{ s.icon_class }} mr-2"></i> {{ s.name }}
        </button>
        {% endfor %}
    </div>

    <div id="service-form-card" class="max-w-4xl mx-auto bg-white rounded-3xl shadow-2xl overflow-hidden border border-gray-100" data-aos="zoom-in">
        <div id="form-header" class="bg-blue-600 text-white p-6 transition-all duration-500">
            <h2 id="service-title" class="text-2xl font-black uppercase">Printing</h2>
        </div>

        <form class="p-10 space-y-8">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-2">Full Name</label>
                    <input type="text" placeholder="Your Name" class="w-full border-2 p-3 rounded-xl outline-none focus:border-blue-500">
                </div>
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-2">Phone Number</label>
                    <input type="text" placeholder="Mobile Number" class="w-full border-2 p-3 rounded-xl outline-none focus:border-blue-500">
                </div>
            </div>

            <div class="border-2 border-dashed border-gray-200 rounded-2xl p-10 text-center hover:bg-gray-50 cursor-pointer">
                <i class="fas fa-file-pdf text-4xl text-gray-300 mb-3"></i>
                <p class="text-gray-500">Click to upload document (PDF, DOCX)</p>
                <input type="file" class="hidden">
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-2">Type</label>
                    <select id="pType" class="w-full border-2 p-3 rounded-xl bg-white" onchange="calc()">
                        <option value="2">Black & White (₹2)</option>
                        <option value="10">Color (₹10)</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-2">Side</label>
                    <select class="w-full border-2 p-3 rounded-xl bg-white">
                        <option>One Side</option>
                        <option>Both Sides</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-2">Copies</label>
                    <input type="number" id="pCopies" value="1" min="1" class="w-full border-2 p-3 rounded-xl" oninput="calc()">
                </div>
            </div>

            <div class="bg-gray-50 p-6 rounded-2xl flex justify-between items-center border">
                <span class="font-bold text-gray-500 uppercase">Estimated Price:</span>
                <span class="text-3xl font-black text-gray-800">₹<span id="total">2</span></span>
            </div>

            <div class="flex flex-col md:flex-row gap-4">
                <button type="submit" class="flex-1 bg-green-600 text-white font-bold py-4 rounded-xl hover:bg-green-700 shadow-lg">ORDER NOW</button>
                <button type="button" class="flex-1 bg-gray-100 text-gray-700 font-bold py-4 rounded-xl border">ADD TO CART</button>
            </div>
        </form>
    </div>
</div>

<script>
    const theme = {
        'Printing': '#2563eb',
        'Spiral Binding': '#9333ea',
        'Soft Binding': '#db2777',
        'Custom Printing': '#059669',
        'Thesis Binding': '#d97706',
        'Photo Frames': '#dc2626'
    };

    function selectService(name, id) {
        document.getElementById('service-title').innerText = name;
        document.getElementById('form-header').style.backgroundColor = theme[name] || '#2563eb';
        
        document.querySelectorAll('.service-tab').forEach(t => t.classList.remove('bg-gray-800', 'text-white'));
        document.getElementById('btn-'+id).classList.add('bg-gray-800', 'text-white');
        calc();
    }

    function calc() {
        const rate = document.getElementById('pType').value;
        const copies = document.getElementById('pCopies').value;
        document.getElementById('total').innerText = rate * copies;
    }

    window.onload = () => document.querySelector('.service-tab').click();
</script>
{% endblock %}