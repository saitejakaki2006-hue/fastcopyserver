{% extends "admin/change_list.html" %}
{% load i18n admin_urls static admin_list %}

{% block result_list %}
    {{ block.super }}
    
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const table = document.querySelector("#result_list");
            if (table) {
                let footer = table.createTFoot();
                let row = footer.insertRow(0);
                row.style.backgroundColor = "#f8fafc";
                row.style.fontWeight = "bold";
                
                for (let i = 0; i < 8; i++) {
                    let cell = row.insertCell(i);
                    cell.style.padding = "15px";
                    // Using |floatformat here is safe because summary_total is a float
                    if (i === 4) cell.innerHTML = "TOTAL REVENUE:";
                    if (i === 5) cell.innerHTML = "₹{{ summary_total|floatformat:2 }}";
                    if (i === 6) cell.innerHTML = "{{ summary_count }} Orders";
                }
            }
        });
    </script>
{% endblock %}

{% block content_footer %}
    <div style="margin-top: 20px; display: flex; gap: 15px; font-family: sans-serif;">
        <div style="flex: 1; background: #15803d; color: white; padding: 20px; border-radius: 12px;">
            <p style="margin: 0; font-size: 11px; font-weight: bold; opacity: 0.8;">FILTERED REVENUE</p>
            <h2 style="margin: 5px 0 0 0;">₹{{ summary_total|floatformat:2 }}</h2>
        </div>
        <div style="flex: 1; background: #1e293b; color: white; padding: 20px; border-radius: 12px;">
            <p style="margin: 0; font-size: 11px; font-weight: bold; opacity: 0.8;">TOTAL ORDERS</p>
            <h2 style="margin: 5px 0 0 0;">{{ summary_count }}</h2>
        </div>
    </div>
{% endblock %}